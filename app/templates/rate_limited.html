{% extends 'base_spaceship.html' %}
{% block content %}
<div class="container pt-6rem">
  <div class="section maxw-720 mx-auto text-center">
    <div class="fs-4rem mb-6">⏳</div>
    <h1 class="fs-25rem fw-800 mb-1rem c-white">Too Many Requests</h1>
    <div class="card">
      <p class="c-white-80 lh-16">{{ message or 'You’ve hit a temporary rate limit. Please wait a moment and try again.' }}</p>
      <p id="rl-countdown" class="c-white-60 mt-05" style="display:none;"></p>
      <div class="flex gap-05 justify-center mt-1">
        <a href="/" class="btn btn-secondary">Go Home</a>
        <a href="javascript:location.reload()" class="btn btn-cta">Try Again</a>
      </div>
    </div>
  </div>
</div>
<script>
(function(){
  var retry = {{ (retry_after or 0)|int }};
  if (!retry) return;
  var el = document.getElementById('rl-countdown');
  el.style.display = '';
  function tick(){
    if (retry <= 0){ el.textContent=''; return; }
    var m = Math.floor(retry/60);
    var s = retry%60;
    el.textContent = 'You can try again in ' + m + 'm ' + (s<10?('0'+s):s) + 's';
    retry -= 1;
    setTimeout(tick, 1000);
  }
  tick();
})();
</script>
{% endblock %}
